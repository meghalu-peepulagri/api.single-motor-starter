import factory from "../factory.js";
import { StarterHandlers } from "../handlers/starter-handlers.js";
import { isAdmin } from "../middlewares/guards/guardUser.js";
import { isAuthorized } from "../middlewares/isAuthorized.js";
const motorHandlers = new StarterHandlers();
const starterRoutes = factory.createApp();
starterRoutes.post("/", isAuthorized, motorHandlers.addStarterBoxHandler);
starterRoutes.get("/mobile", isAuthorized, motorHandlers.starterListMobileHandler);
starterRoutes.get("/web/all", isAuthorized, isAdmin, motorHandlers.starterListWebHandler);
starterRoutes.patch("/assign", isAuthorized, motorHandlers.assignStarterMobileHandler);
starterRoutes.patch("/assign-web", isAuthorized, motorHandlers.assignStarterWebHandler);
starterRoutes.patch("/assign-location", isAuthorized, motorHandlers.assignLocationToStarterHandler);
starterRoutes.patch("/replace", isAuthorized, motorHandlers.replaceStarterLocationHandler);
starterRoutes.patch("/update-status", motorHandlers.markStarterStatusHandler);
starterRoutes.get("/latest-pcb-number", isAuthorized, motorHandlers.getLatestPcbNumberHandler);
starterRoutes.get("/:id/run-time", isAuthorized, motorHandlers.starterRunTimeHandler);
starterRoutes.get("/:id/analytics", isAuthorized, motorHandlers.starterAnalyticsHandler);
starterRoutes.get("/:id/motors", isAuthorized, motorHandlers.starterConnectedMotorsHandler);
starterRoutes.get("/:id/temperature", isAuthorized, motorHandlers.getTemperatureHandler);
starterRoutes.get("/:starter_id/motors/:motor_id/alerts-faults", isAuthorized, motorHandlers.getConsecutiveAlertsFaultsHandler);
starterRoutes.patch("/:id/deploy-status", isAuthorized, motorHandlers.updateDeployStatusHandler);
starterRoutes.patch("/:id/details", isAuthorized, motorHandlers.updateStarterDetailsHandler);
starterRoutes.patch("/:id/allocation", isAuthorized, motorHandlers.updateDeviceAllocationHandler);
starterRoutes.patch("/:id", isAuthorized, motorHandlers.deleteStarterBoxHandler);
export default starterRoutes;
